extends SceneTree

func _init():
    var scene_path = "res://scenes/game/game.tscn"
    
    # Make sure directory exists
    var dir = Directory.new()
    if not dir.dir_exists("res://scenes/game"):
        dir.make_dir_recursive("res://scenes/game")
    
    # Create a basic game scene
    var game_scene = Node2D.new()
    game_scene.name = "Game"
    
    # Set the script
    var script = load("res://scripts/game/game_scene.gd")
    if script:
        game_scene.set_script(script)
    
    # Create basic game world
    var game_world = Node2D.new()
    game_world.name = "GameWorld"
    game_scene.add_child(game_world)
    game_world.owner = game_scene
    
    # Add ground node
    var ground = Node2D.new()
    ground.name = "Ground"
    game_world.add_child(ground)
    ground.owner = game_scene
    
    # Add units node
    var units = Node2D.new()
    units.name = "Units"
    game_world.add_child(units)
    units.owner = game_scene
    
    # Add buildings node
    var buildings = Node2D.new()
    buildings.name = "Buildings"
    game_world.add_child(buildings)
    buildings.owner = game_scene
    
    # Add camera
    var camera = Camera2D.new()
    camera.name = "Camera2D"
    camera.current = true
    game_scene.add_child(camera)
    camera.owner = game_scene
    
    # Save the scene
    var packed_scene = PackedScene.new()
    packed_scene.pack(game_scene)
    ResourceSaver.save(scene_path, packed_scene)
    
    print("Game scene created at: " + scene_path)
    quit()
